<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Subtitle Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font/dist/font-face.css" rel="stylesheet" type="text/css">
    

    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary-color: #324e64;
            --secondary-color: #ebeff2;
            --background-color: #e94a2de0;
            --text-color: #293440;
            --border-radius: 12px;
            --padding: 16px;
        }

        body {
            font-family: 'Vazir', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Container */
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0;
            position: relative;
            min-height: 100vh;
        }

        /* Header and Navigation */
        header {
            background: linear-gradient(135deg, var(--primary-color), #809fb4);
            height: 100%;
            padding: var(--padding);
            color: white;
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
            transition: opacity 0.3s;
        }

        nav a:hover {
            opacity: 0.8;
        }

        /* Hero Section */
        .hero {
            padding: 5px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }


        .hero {
            font-size: 1rem;
            opacity: 0.9;
        }

        .information-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: var(--padding);
            margin-top: 20px;
        }




        .container {
            display: flex;
            align-items: flex-start; /* متن در بالای تصویر قرار می‌گیرد */
            justify-content: flex-start; /* تنظیم متن و تصویر به سمت چپ */
            margin-right: 88px;
            margin-top: 15px;
        }

        .container img {
            width: 50px;
            height: auto;
            margin-top: 15px;
            transform: rotate(180deg);
            filter: invert(48%) sepia(60%) saturate(500%) hue-rotate(330deg) brightness(90%) opacity(90%);
        }


        .container p {
            font-size: 1.2rem;
            color: #cd674c;
            margin-left: 3px; /* حذف فاصله اضافی پیش‌فرض */
            line-height: 1.5; /* تنظیم ارتفاع خطوط برای زیبایی */
        }
    


        .tab-container {
            width: 100%;
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
            overflow: hidden;
            font-family: Arial, sans-serif;
            margin-top: 20px;
            }

            .tabs {
            display: flex;
            background-color: #f1f1f1;
            }

            .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border: none;
            background-color: #db482de0;
            transition: background-color 0.3s;
            }

            .tab:hover {
            background-color: #bbb;
            }

            .tab.active {
            background-color: #aebdc7;
            font-weight: bold;
            }

            .content-container {
                background: rgba(42, 52, 64, 0.423);
            padding: 10px;
            height: 230px; /* ارتفاع ثابت برای ایجاد محدودیت */
            overflow-y: auto; /* فعال کردن اسکرول عمودی */
            border-top: 1px solid #aebec8; /* جداکننده بین تب‌ها و محتوا */
            }

            .content {
            display: none; /* محتواهای غیر فعال همچنان مخفی هستند */
            }

            .content.active {
            display: block; /* فقط محتوای فعال نمایش داده می‌شود */
            }


        /* Bottom Sheet */
        .bottom-sheet {
            border: 12px solid #ffffff;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 30px 30px 0 0;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            transition:  0.4s ease-out;
            z-index: 1000;
            overflow-y: auto;
            padding-bottom: env(safe-area-inset-bottom);
   
            
        }

        element.style {
            top: 10px;
            text-align: center;
            font-size: 20px;
            cursor: pointer;
            z-index: 1001;
        }


        

        .drag-handle {
            width: 40px;
            height: 4px;
            background: #ddd;
            border-radius: 2px;
            margin: 12px auto;
        }

        .sheet-content {
            padding: 0 var(--padding) var(--padding);
        }

        /* Form Sections */
        section {
            margin-bottom: 24px;
        }

        section h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Upload Section */
        .upload-box {
            border: 2px dashed var(--background-color);
            border-radius: var(--border-radius);
            padding: 24px;
            text-align: center;
            background: var(--secondary-color);
        }

        .custom-file-upload {
            background: var(--background-color);
            color: white;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }

        .custom-file-upload:hover {
            background: #db472db0;
        }
 

        input[type="file"] {
            display: none;
        }

        /* Translation Section */
        .translation-section label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 0;
            
        }


        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background: var(--secondary-color);
            margin-top: 8px;
        }



        /* Settings Section */
        .settings-fieldset {
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            padding: 12px;
            margin: 0 5px 5px 5px;
            width: 46%;
            display: inline;
            background: var(--secondary-color);
        }

        legend {
            padding: 0 8px;
            color: var(--text-color);
        }

        input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
        }

        /* Download Section */
        #generateBtn {
            width: 100%;
            height: 55px;
            background: var(--background-color);
            color: white;
            border: none;
            padding: 16px;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 16px 0;
            transition: background 0.3s;
        }

        #generateBtn:hover {
            background: #db472db0;
        }


        .download-button {
            width: 100%;
            height: 55px;
            display: inline-block;
            padding: 12px 20px;
            background-color: #2a3440; /* رنگ پس‌زمینه سبز */
            color: white; /* رنگ متن */
            font-size: 16px;
            text-align: center;
            font-weight: bold;
            text-decoration: none; /* حذف خط زیر متن */
            border-radius: var(--border-radius);
            transition: all 0.3s ease; /* انیمیشن تغییرات */
            cursor: pointer; /* تغییر نشانگر ماوس */
            
        }

        .download-button:hover {
            background-color: white; /* رنگ پس‌زمینه در حالت هاور */
            color: #2a3440; /* تغییر رنگ متن */
            border: 2px solid #2a3440; /* حاشیه */
        }

        .download-button:active {
            background-color: #2a3440; /* رنگ پس‌زمینه در حالت کلیک */
            color: white;
            border: 2px solid #2a3440;
            transform: scale(0.98); /* کمی کوچک‌تر شدن در حالت کلیک */
        }

        .contact-info {
            display: flex;
            justify-content: center;
            gap: 10px;
            font-weight: 500;
        }

        .contact-info a {
            color: #fff;
            text-decoration: none;
            transition: color 0.3s;
        }

        .contact-info a:hover {
            color: #0e0d0deb; /* رنگ طلایی برای حالت هاور */
        }

        .contact-info span {
            color: #ddd;
        }



        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 1.5rem;
            }

            .hero {
                font-size: 0.9rem;
            }

            .information-box {
                font-size: 0.9rem;
            }

            section h2 {
                font-size: 1.2rem;
            }
        }

        @media (min-width: 769px) {
            .container {
                max-width: 768px;
                margin: 0 auto;
            }

            .bottom-sheet {
                max-width: 768px;
                margin: 0 auto;
                right: 50%;
                transform: translateX(50%);
            }
        }

        /* Dark Mode Support */
        /*@media (prefers-color-scheme: dark) {
            :root {
                --background-color: #1a1a1a;
                --text-color: #ffffff;
            }

            .bottom-sheet {
                background: #2d2d2d;
            }

            .upload-box {
                background: #333;
            }

            .information-box {
                background: rgba(255, 255, 255, 0.05);
            }

            select, input[type="number"] {
                background: #333;
                color: white;
                border-color: #444;
            }

            .settings-fieldset {
                border-color: #444;
            }
        }*/
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav>
                <div class="logo">AI Subtitle Generator</div>
                <i class="fa-solid fa-closed-captioning" style="font-size: 2rem; margin-left: 20px;"></i>
            </nav>
            <div class="hero">
                <h1>تولید زیرنویس خودکار با هوش مصنوعی</h1>
                <br>



                <div class="tab-container">
                    <div class="tabs">
                    <button class="tab active" onclick="showContent(0)"><i class="fas fa-info-circle about-icon"></i></button>
                      <button class="tab" onclick="showContent(1)"><i class="fas fa-cloud-upload-alt"></i></button>
                      <button class="tab" onclick="showContent(2)"><i class="fas fa-language"></i></button>
                      <button class="tab" onclick="showContent(3)"><i class="fas fa-cog"></i></button>
                      <button class="tab" onclick="showContent(4)"><i class="fas fa-download"></i></button>
                    
                    </div>
                    <div class="content-container">
                        <div class="content active">این سایت به شما این امکان را میدهد تا به راحتی ویدیو های خود را آپلود کنید و به‌ صورت خودکار زیرنویس‌ هایی دقیق و هماهنگ با محتوای ویدیو دریافت کنید. با استفاده از هوش مصنوعی پیشرفته، این ابزار به سرعت محتوای ویدیوی شما را تحلیل کرده و زیرنویس ‌هایی متناسب با گفتار ایجاد می‌کند.
                            همچنین، قابلیت ترجمه زیرنویس‌ ها به زبان ‌های مختلف و تنظیم دقیق پارامترهای نمایش زیرنویس مانند سرعت و تاخیر وجود دارد. این سایت مناسب برای تولیدکنندگان محتوا، مترجمان، و افرادی است که نیاز به زیرنویس‌ های حرفه ‌ای دارند. شما میتوانید از خروجی این سایت فایل srt دریافت کنید. 
                           این سایت از مدل OpenAI برای ساخت زیرنویس استفاده میکند که از زبان های 	فارسی، 	انگلیسی، عربی، 	اسپانیایی، 	فرانسوی، 	روسی، 	چینی، 	ژاپنی، 	ترکی و 75 زبان دیگر پشتیبانی میکند. 
                           شما میتوانید با  انتخاب مدل های large یا medium دقت تولید زیرنویس را بالا ببرید و همچنین برای ویدیو هایی که صوت با کیفیت پایین یا نویز شدید دارن میتوانید از این دو مدل استفاده کنید
                            <br>
                            <br>
                            <br>
                            <br>
                            <br>
                            <p>گزارش خطا ـ تماس با ما</p>
                            <div class="contact-info">
                                <a href="https://t.me/yah_ya_suo" target="_blank">تماس از طریق تلگرام</a>
                                <span>|</span>
                                <a href="mailto:yahyaeslami79.com">  ایمیل</a>
                            </div>
                            <br>
                            <br>
                            <p>© 2024 تولید زیرنویس خودکار با هوش مصنوعی | تمامی حقوق محفوظ است.</p>
                            <br>
                        </div>
                      <div class="content">در بخش آپلود ویدیو شما باید فایل صوتی یا ویدیویی مورد نظر خود را آپلود کنید. با گزینه "انتخاب فایل" فایل رویدیو مورد نظر را از سیستم خود انتخاب کنید. پس از آپلود، فایل آماده پردازش خواهد بود.</div>
                      <div class="content">اگر نیاز به ترجمه زیرنویس به زبان دیگری دارید، گزینه "فعال‌ سازی ترجمه" را فعال کنید. با فعال‌ سازی ترجمه، می‌ توانید زبان مورد نظر خود را از منوی کشویی انتخاب کنید و زیرنویس‌ به صورت خودکار ترجمه خواهد شد.</div>
                      <div class="content">در این بخش می‌توانید تنظیمات مربوط به نمایش زیرنویس‌ را انجام دهید. شامل تغییرات در سرعت نمایش، تاخیر زمانی و فاصله زمانی بین شروع و پایان زیرنویس‌ ها است تا بتوانید زیرنویس‌ را دقیق‌ تر هماهنگ کنید. با استفاده از "فاصله انتهایی" و "فاصله ابتدایی" میتوانید زمان نمایش هر متن زیرنویس را مشخص کنید. </div>
                      <div class="content">پس از انجام تنظیمات مورد نظر، مدل را انتخاب کنید (به طور پیشفرض برای زبان انگلیسی با کیفیت مناسب صدای ویدیو مدل "tiny" مناسب خواهد بود ولی برای زبان های دیگر و کیفیت پایین صدای ویدیو از مدل های "small" و "medium" استفاده کنید و در نظر داشته باشید با انتخاب مدل های پیشرفته تر زمان ساخت زیرنویس بیشتر خواهد شد) و پس از آن گزینه "شروع" را انتخاب کنید تا فرآیند تولید زیرنویس آغاز شود. زیرنویس آماده شده به صورت فایل قابل دانلود در اختیار شما قرار می‌گیرد.</div>
                  </div>
            </div>
            <div class="container">
                <p class="container_p">شروع</p>
                <img src="{{ url_for('static', filename='images/up-arrow.png') }}" alt="نمونه تصویر">
            </div>
        </header>

        <div class="bottom-sheet">
            <div class="drag-handle"></div>
            <div class="sheet-content">
                <form action="/" method="post" enctype="multipart/form-data">
                    <section id="upload" class="upload-section">
                        <h2><i class="fas fa-upload"></i> آپلود ویدیو</h2>
                        <div class="upload-box">
                            <label for="fileUpload" class="custom-file-upload">
                                انتخاب فایل
                                <i class="fas fa-cloud-upload-alt"></i>
                            </label>
                            <input type="file" name="file" id="fileUpload">
                        </div>
                    </section>

                    <section id="translation" class="translation-section">
                        <h2><i class="fas fa-language"></i> ترجمه زیرنویس</h2>
                        <label>
                            <input type="checkbox" id="enableTranslation" name="enableTranslation">
                            فعال‌ سازی ترجمه
                        </label>
                        <select id="dest_lang" name="dest_lang" disabled>
                            <option value="ar">Arabic</option>
                            <option value="en">English</option>
                            <option value="fa">Persian</option>
                            <option value="fr">French</option>
                            <option value="tr">Turkish</option>
                        </select>
                    </section>

                    <section id="settings" class="settings-section">
                        <h2><i class="fas fa-cog"></i> تنظیمات زیرنویس</h2>
                        <fieldset class="settings-fieldset">
                            <legend>تأخیر</legend>
                            <input type="number" name="subtitleDelay" min="-100" max="100" value="0.0" step="0.1">
                        </fieldset>

                        <fieldset class="settings-fieldset">
                            <legend>سرعت</legend>
                            <input type="number" name="subtitleSpeed" min="0" max="10" value="1.0" step="0.1">
                        </fieldset>

                        <fieldset class="settings-fieldset">
                            <legend>فاصله انتهایی</legend>
                            <input type="number" name="PaddingStart" min="-10" max="10" value="0.0" step="0.1">
                        </fieldset>
                        
                        <fieldset class="settings-fieldset">
                            <legend>فاصله ابتدایی</legend>
                            <input type="number" name="PaddingEnd" min="-10" max="10" value="1.0" step="0.1">
                        </fieldset>
                    </section>

                    <section id="download" class="download-section">
                        <h2><i class="fas fa-download"></i> دریافت زیرنویس</h2>
                        <label class="model">انتخاب مدل:</label>
                        <select id="model" name="model">
                            <option value="tiny">tiny</option>
                            <option value="base">base</option>
                            <option value="small">small</option>
                            <option value="medium">medium</option>
                            <option value="large">large</option>
                        </select>
                        <button type="submit" id="generateBtn"><i class="fas fa-play"></i>شروع</button>
                    </section>
                </form>
            </div>
        </div>
    </div>


    <script>
        const bottomSheet = document.querySelector('.bottom-sheet');
        const dragHandle = document.querySelector('.drag-handle');
        const sheetContent = document.querySelector('.sheet-content');

        // Create a toggle icon
        const toggleIcon = document.createElement('div');
        toggleIcon.innerHTML = '<i class="fas fa-angle-up"></i>'; // Up arrow when closed
        toggleIcon.style.top = '10px';
        toggleIcon.style.left = '50%';
        toggleIcon.style.textAlign = 'center';
        toggleIcon.style.fontSize = '25px';
        toggleIcon.style.cursor = 'pointer';
        toggleIcon.style.zIndex = '1001';


        // Remove the existing drag handle
        dragHandle.remove();

        // Add the toggle icon to the bottom sheet
        bottomSheet.insertBefore(toggleIcon, sheetContent);

        // Initial state
        let isOpen = false;
        bottomSheet.style.height = '100px';
        sheetContent.style.display = 'none';

        // Toggle function
        function toggleBottomSheet() {
            const maxHeight = window.innerHeight * 0.88; // Maximum height
            const minHeight = 100; // Minimum height

            if (!isOpen) {
                // Open the bottom sheet
                bottomSheet.style.height = `${maxHeight}px`;
                sheetContent.style.display = 'block';
                sheetContent.style.overflow = 'auto';
                toggleIcon.innerHTML = '<i class="fas fa-angle-down"></i>'; // Down arrow when open
                isOpen = true;
            } else {
                // Close the bottom sheet
                bottomSheet.style.height = `${minHeight}px`;
                sheetContent.style.display = 'none';
                toggleIcon.innerHTML = '<i class="fas fa-angle-up"></i>'; // Up arrow when closed
                isOpen = false;
            }
        }

        // Add click event listener to the toggle icon
        toggleIcon.addEventListener('click', toggleBottomSheet);

        // Remove existing touch event listeners
        bottomSheet.removeEventListener('touchstart', () => {});
        bottomSheet.removeEventListener('touchmove', () => {});
        bottomSheet.removeEventListener('touchend', () => {});






        document.getElementById("enableTranslation").addEventListener("change", function() {
        document.getElementById("dest_lang").disabled = !this.checked;
    });

    document.getElementById("generateBtn").addEventListener("click", function(event) {
        event.preventDefault(); // جلوگیری از ارسال فرم به صورت پیش‌فرض

        // حذف دکمه دانلود قدیمی در صورت وجود
        const existingDownloadButton = document.querySelector(".download-button");
        if (existingDownloadButton) {
            existingDownloadButton.remove();
        }

        // نمایش پیام لطفا صبر کنید
        const statusMessage = document.createElement("label");
        statusMessage.innerHTML = '<i class="fas fa-spinner fa-spin"></i> لطفا صبر کنید...';
        statusMessage.classList.add("status");
        document.querySelector(".download-section").appendChild(statusMessage);

        // اطلاعات فرم را به فرم‌داده تبدیل کنید
        const formData = new FormData(document.querySelector("form"));
        
        // ارسال درخواست AJAX
        fetch("/", {
            method: "POST",
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            // حذف پیام لطفا صبر کنید
            statusMessage.remove();

            if (data.success) {
                // اضافه کردن دکمه دانلود
                const downloadButton = document.createElement("a");
                downloadButton.href = data.download_url;
                downloadButton.textContent = "دانلود زیرنویس";
                downloadButton.classList.add("download-button");
                downloadButton.setAttribute("download", "adjusted_subtitle.srt");

                // اضافه کردن دکمه به بخش دانلود
                document.querySelector(".download-section").appendChild(downloadButton);
            } else {
                alert("خطا در ایجاد فایل زیرنویس");
            }
        })
        .catch(error => {
            statusMessage.remove();
            alert("خطایی رخ داده. لطفا چک کنید ویدیو به درستی اپلود شده باشه!");
            console.error("Error:", error);
        });
    });


    function showContent(index) {
  // انتخاب تمام تب‌ها و محتواها
  const tabs = document.querySelectorAll(".tab");
  const contents = document.querySelectorAll(".content");

  // حذف کلاس active از همه تب‌ها و محتواها
  tabs.forEach((tab) => tab.classList.remove("active"));
  contents.forEach((content) => content.classList.remove("active"));

  // اضافه کردن کلاس active به تب و محتوای انتخاب شده
  tabs[index].classList.add("active");
  contents[index].classList.add("active");
}

    </script>
    
</body>
</html>
